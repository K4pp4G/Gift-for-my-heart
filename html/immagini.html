<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="immagini.mjs"></script>
    <link href="../css/immagini.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <title>Test</title>
</head>
<body id="root">
    <div id="my-mod" class="hidden">
        <img id="modal_image" class="shadow-1-strong rounded" src="">
    </div>
    <div class="lightbox box-container">
        <div id="container" class="row">
        </div>
    </div>

    <script>

        modal = document.getElementById("my-mod")
        body = document.getElementById("root")
        container = document.getElementById("container")
        modal.onclick = () => {
            modal.className="hidden"
            body.className = ""
            container.className = "row"
        }

        let columns = [[], [], [], []]
        if (screen.width <= 780) {
            columns = [[], []]
        }
        else if (screen.width <= 1000) {
            columns = [[], [], []]
        }
        console.log(columns)
        current_c = 0

        const query = document.location.search
        const params = new URLSearchParams(query)

        name = ""
        if (params.has("name")) {
            name = params.get("name")
        }

        images = getByName(name)

        for (let i = 0; i < images.length; i++) {
            image = document.createElement('img')
            image.src = images[i]
            image.className = "gallery__element shadow-1-strong rounded w-100 mb-4 mb-md-4"
            image.id = i

            image.onclick = () => {
                modal.className = "my-modal"
                body.className="stop"
                modal_image = document.getElementById("modal_image")
                modal_image.src = images[i]
                container.className = "row add_blur"
            }

            columns[current_c].push(image)
            if (current_c == columns.length-1) {
                current_c = 0
            } else {
                current_c += 1
            }
        }
        for (let i = 0; i < columns.length; i++) {
            column = document.createElement("div")
            column.className = "col-sm-" + (12/columns.length)
            for (let k = 0; k < columns[i].length; k++) {
                column.append(columns[i][k])
            }
            row = document.getElementById("container")
            row.append(column)
        }
    </script>
</body>
</html>